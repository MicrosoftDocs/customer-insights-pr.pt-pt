---
title: Experiências com o Machine Learning Studio (clássico)
description: Utilize os modelos Machine Learning Studio (clássico) no Dynamics 365 Customer Insights.
ms.date: 12/03/2020
ms.service: customer-insights
ms.subservice: audience-insights
ms.topic: conceptual
author: m-hartmann
ms.author: mhart
ms.reviewer: ameetj
manager: shellyha
ms.openlocfilehash: 556b6810db0ed2733a3f086291757bd85b77e371
ms.sourcegitcommit: a9b2cf598f256d07a48bba8617347ee90024a1dd
ms.translationtype: HT
ms.contentlocale: pt-PT
ms.lasthandoff: 12/03/2020
ms.locfileid: "4669032"
---
# <a name="use-models-based-on-azure-machine-learning-studio-classic"></a><span data-ttu-id="a2df3-103">Utilize os modelos com base no Azure Machine Learning Studio (clássico)</span><span class="sxs-lookup"><span data-stu-id="a2df3-103">Use models based on Azure Machine Learning Studio (classic)</span></span>

<span data-ttu-id="a2df3-104">Os dados unificados em Dynamics 365 Customer Insights são uma origem para a construção de modelos de aprendizagem automática que podem gerar conhecimentos empresariais adicionais.</span><span class="sxs-lookup"><span data-stu-id="a2df3-104">The unified data in Dynamics 365 Customer Insights is a source for building machine learning models that can generate additional business insights.</span></span> <span data-ttu-id="a2df3-105">O Customer Insights integra-se com o Machine Learning Studio (clássico) para utilizar os seus próprios modelos personalizados.</span><span class="sxs-lookup"><span data-stu-id="a2df3-105">Customer Insights integrates with Machine Learning Studio (classic) to use your own custom models.</span></span> <span data-ttu-id="a2df3-106">Para ver como os modelos desenvolvidos em Azure Machine Learning estão integrados com o Customer Insights, consulte as [experiências Azure Machine Learning](azure-machine-learning-experiments.md).</span><span class="sxs-lookup"><span data-stu-id="a2df3-106">To see how models developed in Azure Machine Learning are integrated with Customer Insights, see [Azure Machine Learning experiments](azure-machine-learning-experiments.md).</span></span>

## <a name="prerequisites"></a><span data-ttu-id="a2df3-107">Pré-requisitos</span><span class="sxs-lookup"><span data-stu-id="a2df3-107">Prerequisites</span></span>

- <span data-ttu-id="a2df3-108">Aceda ao Customer Insights</span><span class="sxs-lookup"><span data-stu-id="a2df3-108">Access to Customer Insights</span></span>
- <span data-ttu-id="a2df3-109">Subscrição do Azure Enterprise ativa</span><span class="sxs-lookup"><span data-stu-id="a2df3-109">Active Azure Enterprise subscription</span></span>
- [<span data-ttu-id="a2df3-110">Perfis de cliente unificados</span><span class="sxs-lookup"><span data-stu-id="a2df3-110">Unified customer profiles</span></span>](data-unification.md)
- <span data-ttu-id="a2df3-111">Configuração da [Exportação de entidades para Armazenamento de Blobs do Azure](export-azure-blob-storage.md)</span><span class="sxs-lookup"><span data-stu-id="a2df3-111">[Entity export to Azure Blob storage](export-azure-blob-storage.md) set up</span></span>

## <a name="set-up-machine-learning-studio-classic"></a><span data-ttu-id="a2df3-112">Configurar o Machine Learning Studio clássico</span><span class="sxs-lookup"><span data-stu-id="a2df3-112">Set up Machine Learning Studio Classic</span></span>

<span data-ttu-id="a2df3-113">Num primeiro passo, precisamos de criar uma área de trabalho para e abrir o Machine Learning Studio (clássico).</span><span class="sxs-lookup"><span data-stu-id="a2df3-113">In a first step, we need to create a workspace for and open the Machine Learning Studio (classic).</span></span>

1. <span data-ttu-id="a2df3-114">Vá para [https://www.portal.azure.com](https://www.portal.azure.com/) e inicie sessão.</span><span class="sxs-lookup"><span data-stu-id="a2df3-114">Go to [https://www.portal.azure.com](https://www.portal.azure.com/) and sign in.</span></span>

1. <span data-ttu-id="a2df3-115">Selecione **Criar um recurso**.</span><span class="sxs-lookup"><span data-stu-id="a2df3-115">Select **Create a resource**.</span></span>

1. <span data-ttu-id="a2df3-116">Procure **Área de Trabalho do Machine Learning Studio** e selecione **Criar**.</span><span class="sxs-lookup"><span data-stu-id="a2df3-116">Search **Machine Learning Studio Workspace** and select **Create**.</span></span>

1. <span data-ttu-id="a2df3-117">Introduza os detalhes necessários para [criar a área de trabalho](https://docs.microsoft.com/azure/machine-learning/studio/create-workspace).</span><span class="sxs-lookup"><span data-stu-id="a2df3-117">Enter the required details to [create the workspace](https://docs.microsoft.com/azure/machine-learning/studio/create-workspace).</span></span> <span data-ttu-id="a2df3-118">Escolha o **Plano de preços do plano de serviço Web** com base na quantidade de dados que pretende importar.</span><span class="sxs-lookup"><span data-stu-id="a2df3-118">Choose the **Web service plan pricing tier** based on the amount of data you plan to import.</span></span> <span data-ttu-id="a2df3-119">Para melhor desempenho, selecione a **Localização** que é geograficamente mais próxima de si.</span><span class="sxs-lookup"><span data-stu-id="a2df3-119">For best performance, select the **Location** that is geographically closest to you.</span></span>

1. <span data-ttu-id="a2df3-120">Depois de criar o recurso, aparecerá o dashboard da área de trabalho do Machine Learning Studio.</span><span class="sxs-lookup"><span data-stu-id="a2df3-120">After creating the resource, the Machine Learning Studio workspace dashboard will appear.</span></span> <span data-ttu-id="a2df3-121">Selecione **Iniciar Machine Learning Studio**.</span><span class="sxs-lookup"><span data-stu-id="a2df3-121">Select **Launch Machine Learning Studio**.</span></span>

   ![Interface de utilizador do Azure Machine Learning Studio](media/azure-machine-learning-studio.png)

## <a name="work-with-azure-machine-learning-studio"></a><span data-ttu-id="a2df3-123">Trabalhar com o Azure Machine Learning Studio</span><span class="sxs-lookup"><span data-stu-id="a2df3-123">Work with Azure Machine Learning Studio</span></span>

<span data-ttu-id="a2df3-124">Pode agora criar uma nova experimentação, ou importar um modelo de experimento existente a partir da galeria de exemplo.</span><span class="sxs-lookup"><span data-stu-id="a2df3-124">You can now create a new experiment, or import an existing experiment template from the sample gallery.</span></span> <span data-ttu-id="a2df3-125">Há exemplos de experiências para três cenários padrão:</span><span class="sxs-lookup"><span data-stu-id="a2df3-125">There are sample experiments for three standard scenarios:</span></span>

- [<span data-ttu-id="a2df3-126">Predição de abandono</span><span class="sxs-lookup"><span data-stu-id="a2df3-126">Churn prediction</span></span>](#churn-analysis)

- [<span data-ttu-id="a2df3-127">Valor vitalício do cliente</span><span class="sxs-lookup"><span data-stu-id="a2df3-127">Customer lifetime value</span></span>](#customer-lifetime-value-prediction)

- [<span data-ttu-id="a2df3-128">Recomendação do produto ou próxima melhor ação</span><span class="sxs-lookup"><span data-stu-id="a2df3-128">Product recommendation or next best action</span></span>](#productrecommendation-or-next-best-action)

1. <span data-ttu-id="a2df3-129">Se criar um novo experimento ou utilizar um modelo de experimento a partir da galeria, tem de configurar as propriedades de **Importar Dados**.</span><span class="sxs-lookup"><span data-stu-id="a2df3-129">If you create a new experiment or use an experiment template from the gallery, you need to configure the **Import Data** properties.</span></span> <span data-ttu-id="a2df3-130">Utilize a experiência guiada ou forneça diretamente detalhes para aceder ao Armazenamento de Blobs do Azure que contém os seus dados.</span><span class="sxs-lookup"><span data-stu-id="a2df3-130">Use the guided experience or directly provide details to access the Azure Blob Storage that contains your data.</span></span>  

   ![Experimento do Azure Machine Learning Studio](media/azure-machine-learning-studio-experiment.png)

1. <span data-ttu-id="a2df3-132">Agora pode criar um pipeline de processamento personalizado para limpar e pré-processar os dados, extrair funcionalidades e treinar um modelo adequado.</span><span class="sxs-lookup"><span data-stu-id="a2df3-132">Now you can build a custom processing pipeline to clean and preprocess the data, extract features, and train a suitable model.</span></span>

1. <span data-ttu-id="a2df3-133">Teste e otimize o desempenho do modelo.</span><span class="sxs-lookup"><span data-stu-id="a2df3-133">Test and optimize the model performance.</span></span>

1. <span data-ttu-id="a2df3-134">Quando estiver satisfeito com a qualidade de um modelo, selecione **Configurar serviço Web** > **Serviço Web Preditivo**.</span><span class="sxs-lookup"><span data-stu-id="a2df3-134">When you’re satisfied with the quality of a model, select **Set up web service** > **Predictive Web Service**.</span></span> <span data-ttu-id="a2df3-135">Esta opção importa o modelo treinado e o pipeline de personalização da experimentação de preparação para um serviço preditivo.</span><span class="sxs-lookup"><span data-stu-id="a2df3-135">This option imports the trained model and the featurization pipeline from the training experiment to a predictive service.</span></span> <span data-ttu-id="a2df3-136">O serviço preditivo pode levar outro conjunto de dados de entrada com o esquema usado na experimentação de preparação para fazer previsões.</span><span class="sxs-lookup"><span data-stu-id="a2df3-136">The predictive service can take another set of input data with the schema used in the training experiment to make predictions.</span></span>

   ![Criar um serviço Web preditivo](media/predictive-webservice-control.png)

1. <span data-ttu-id="a2df3-138">Uma vez que o experimento de serviço Web preditivo seja bem sucedido, pode implementá-lo para agendamento automático.</span><span class="sxs-lookup"><span data-stu-id="a2df3-138">Once the predictive web service experiment is successful, you can deploy it for auto scheduling.</span></span> <span data-ttu-id="a2df3-139">Para que o serviço Web funcione com o Customer Insights, selecione **Implementar o Serviço Web** > **Implementar o Serviço Web [Novo] Pré-visualização**.</span><span class="sxs-lookup"><span data-stu-id="a2df3-139">To have the web service work with Customer Insights, select **Deploy Web Service** > **Deploy Web Service [New] Preview**.</span></span> <span data-ttu-id="a2df3-140">[Obter mais informações sobre implementar o serviço Web](https://docs.microsoft.com/azure/machine-learning/studio/deploy-a-machine-learning-web-service).</span><span class="sxs-lookup"><span data-stu-id="a2df3-140">[Learn more about deploying a web service](https://docs.microsoft.com/azure/machine-learning/studio/deploy-a-machine-learning-web-service).</span></span>

   ![Implementar um serviço Web preditivo](media/predictive-webservice-deploy.png)

## <a name="sample-models-from-the-gallery"></a><span data-ttu-id="a2df3-142">Modelos de exemplo da galeria</span><span class="sxs-lookup"><span data-stu-id="a2df3-142">Sample models from the gallery</span></span>

<span data-ttu-id="a2df3-143">Vamos usar um cenário fictício do Hotel Contoso para os modelos deste artigo.</span><span class="sxs-lookup"><span data-stu-id="a2df3-143">We'll use a fictitious scenario of Contoso Hotel for the models in this article.</span></span> <span data-ttu-id="a2df3-144">O Hotel Contoso reúne os seguintes dados:</span><span class="sxs-lookup"><span data-stu-id="a2df3-144">Contoso Hotel gathers the following data:</span></span>

- <span data-ttu-id="a2df3-145">Dados de CRM que consistem na atividade de estadia no hotel.</span><span class="sxs-lookup"><span data-stu-id="a2df3-145">CRM data consisting of hotel stay activity.</span></span> <span data-ttu-id="a2df3-146">O conjunto de dados inclui informações sobre as datas de estadia para cada cliente registado.</span><span class="sxs-lookup"><span data-stu-id="a2df3-146">The data set includes information about the dates of stay for each registered customer.</span></span> <span data-ttu-id="a2df3-147">Também contém informações sobre a reserva, tipos de quartos, detalhes de gastos, e assim por diante.</span><span class="sxs-lookup"><span data-stu-id="a2df3-147">It also contains information about the booking, room types, details of spend, and so on.</span></span> <span data-ttu-id="a2df3-148">Os dados estendem-se por quatro anos, de janeiro de 2014 a janeiro de 2018.</span><span class="sxs-lookup"><span data-stu-id="a2df3-148">The data spans four years, from January 2014 to January 2018.</span></span>
- <span data-ttu-id="a2df3-149">Perfis de clientes de hóspedes do hotel.</span><span class="sxs-lookup"><span data-stu-id="a2df3-149">Customer profiles of hotel guests.</span></span> <span data-ttu-id="a2df3-150">Estes perfis contêm informações sobre cada cliente, incluindo o seu nome, data de nascimento, endereço postal, sexo e número de telefone.</span><span class="sxs-lookup"><span data-stu-id="a2df3-150">These profiles contain information about each customer, including their name, birthdate, postal address, gender, and phone number.</span></span>
- <span data-ttu-id="a2df3-151">Uso de serviços oferecidos pelo hotel, como spa, lavandaria, Wi-Fi ou estafeta.</span><span class="sxs-lookup"><span data-stu-id="a2df3-151">Usage of services offered by the hotel, such as the spa, laundry, WiFi, or courier.</span></span> <span data-ttu-id="a2df3-152">Esta informação é registada para cada cliente registado.</span><span class="sxs-lookup"><span data-stu-id="a2df3-152">This information is logged for each registered customer.</span></span> <span data-ttu-id="a2df3-153">Normalmente, o uso de serviços está ligado à estadia.</span><span class="sxs-lookup"><span data-stu-id="a2df3-153">Typically, use of services is linked with the stay.</span></span> <span data-ttu-id="a2df3-154">Em alguns casos, os serviços podem ser usados por clientes sem ficar no hotel.</span><span class="sxs-lookup"><span data-stu-id="a2df3-154">In some cases, services can be used by customers without staying in the hotel.</span></span>

## <a name="churn-analysis"></a><span data-ttu-id="a2df3-155">Análise de Abandono</span><span class="sxs-lookup"><span data-stu-id="a2df3-155">Churn Analysis</span></span>

<span data-ttu-id="a2df3-156">A análise de abandono aplica-se a diferentes áreas de negócio.</span><span class="sxs-lookup"><span data-stu-id="a2df3-156">Churn analysis applies to different business areas.</span></span> <span data-ttu-id="a2df3-157">Neste exemplo, vamos olhar para o abandono de serviço, especificamente no contexto dos serviços hoteleiros, como descrito acima.</span><span class="sxs-lookup"><span data-stu-id="a2df3-157">In this example, we’re going to look at service churn, specifically in the context of hotel services as described above.</span></span> <span data-ttu-id="a2df3-158">Fornece um exemplo de trabalho de um pipeline de modelo de ponta a ponta que pode ser usado como ponto de partida para qualquer outro tipo de modelo de abandono.</span><span class="sxs-lookup"><span data-stu-id="a2df3-158">It provides a working example of an end–to–end model pipeline that can be used as a starting point for any other type of churn model.</span></span>

### <a name="definition-of-churn"></a><span data-ttu-id="a2df3-159">Definição de Abandono</span><span class="sxs-lookup"><span data-stu-id="a2df3-159">Definition of Churn</span></span>

<span data-ttu-id="a2df3-160">A definição de abandono pode diferir com base no cenário.</span><span class="sxs-lookup"><span data-stu-id="a2df3-160">The definition of churn can differ based on the scenario.</span></span> <span data-ttu-id="a2df3-161">Neste exemplo, um hóspede que não tenha visitado o hotel no ano passado deve ser etiquetado como abandono.</span><span class="sxs-lookup"><span data-stu-id="a2df3-161">In this example, a guest who hasn’t visited the hotel in the past year should be labeled as churned.</span></span>  

<span data-ttu-id="a2df3-162">O modelo de experiência pode ser importado da galeria.</span><span class="sxs-lookup"><span data-stu-id="a2df3-162">The experiment template can be imported from the gallery.</span></span> <span data-ttu-id="a2df3-163">Em primeiro lugar, certifique-se de que importa os dados para **Atividade de Estadia no Hotel**, **Dados de cliente** e **Dados de Utilização de Serviços** do Armazenamento de Blobs do Azure.</span><span class="sxs-lookup"><span data-stu-id="a2df3-163">First, ensure that you import the data for **Hotel Stay Activity**, **Customer data**, and **Service Usage Data** from Azure Blob storage.</span></span>

   ![Importar dados para o modelo de abandono](media/import-data-azure-blob-storage.png)

### <a name="featurization"></a><span data-ttu-id="a2df3-165">Caracterização</span><span class="sxs-lookup"><span data-stu-id="a2df3-165">Featurization</span></span>

<span data-ttu-id="a2df3-166">Com base na definição de abandono, identificamos primeiro as funcionalidades não processadas que influenciarão a etiqueta.</span><span class="sxs-lookup"><span data-stu-id="a2df3-166">Based on the definition of churn, we first identify the raw features that will influence the label.</span></span> <span data-ttu-id="a2df3-167">Em seguida, processamos estas funcionalidades não processadas em funcionalidades numéricas que podem ser usadas com modelos de aprendizagem automática.</span><span class="sxs-lookup"><span data-stu-id="a2df3-167">Then, we process these raw features into numerical features that can be used with machine learning models.</span></span> <span data-ttu-id="a2df3-168">A integração de dados acontece no Customer Insights para que possamos juntar-nos a estas tabelas, utilizando o *ID de cliente*.</span><span class="sxs-lookup"><span data-stu-id="a2df3-168">Data integration happens in Customer Insights so we can join these tables by using the *Customer ID*.</span></span>

   ![Unir dados importados](media/join-imported-data.png)

<span data-ttu-id="a2df3-170">A caracterização para a criação do modelo de análise de abandono pode ser um pouco complicada.</span><span class="sxs-lookup"><span data-stu-id="a2df3-170">The featurization for building the model for churn analysis can be a little tricky.</span></span> <span data-ttu-id="a2df3-171">Os dados são uma função do tempo com a nova atividade hoteleira registada diariamente.</span><span class="sxs-lookup"><span data-stu-id="a2df3-171">The data is a function of time with new hotel activity recorded on daily basis.</span></span> <span data-ttu-id="a2df3-172">Durante a caracterização, queremos gerar funcionalidades estáticas a partir dos dados dinâmicos.</span><span class="sxs-lookup"><span data-stu-id="a2df3-172">During featurization, we want to generate static features from the dynamic data.</span></span> <span data-ttu-id="a2df3-173">Neste caso, geramos múltiplas funcionalidades da atividade hoteleira com uma janela deslizante de um ano.</span><span class="sxs-lookup"><span data-stu-id="a2df3-173">In this case, we generate multiple features from hotel activity with a sliding window of one year.</span></span> <span data-ttu-id="a2df3-174">Também expandimos as funcionalidades categóricas, como o tipo de quarto ou o tipo de reserva, em funcionalidades separadas usando codificação de uma frequência.</span><span class="sxs-lookup"><span data-stu-id="a2df3-174">We also expand the categorical features like room type or booking type into separate features using one-hot encoding.</span></span>  

<span data-ttu-id="a2df3-175">Lista final de funcionalidades:</span><span class="sxs-lookup"><span data-stu-id="a2df3-175">Final list of features:</span></span>

| <span data-ttu-id="a2df3-176">**Número**</span><span class="sxs-lookup"><span data-stu-id="a2df3-176">**Number**</span></span>  | <span data-ttu-id="a2df3-177">**Original_Column**</span><span class="sxs-lookup"><span data-stu-id="a2df3-177">**Original_Column**</span></span>          | <span data-ttu-id="a2df3-178">**Funcionalidades derivadas**</span><span class="sxs-lookup"><span data-stu-id="a2df3-178">**Derived Features**</span></span>                                                                                                                      |
|-------------|------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="a2df3-179">1</span><span class="sxs-lookup"><span data-stu-id="a2df3-179">1</span></span>           | <span data-ttu-id="a2df3-180">Tipo de Quarto</span><span class="sxs-lookup"><span data-stu-id="a2df3-180">Room Type</span></span>                    | <span data-ttu-id="a2df3-181">RoomTypeLargeCount, RoomTypeSmallCount</span><span class="sxs-lookup"><span data-stu-id="a2df3-181">RoomTypeLargeCount, RoomTypeSmallCount</span></span>                                                                                                    |
| <span data-ttu-id="a2df3-182">2</span><span class="sxs-lookup"><span data-stu-id="a2df3-182">2</span></span>           | <span data-ttu-id="a2df3-183">Tipo de Reserva</span><span class="sxs-lookup"><span data-stu-id="a2df3-183">Booking Type</span></span>                 | <span data-ttu-id="a2df3-184">BookingTypeOnlineCount, BookingTypePhoneCallCount</span><span class="sxs-lookup"><span data-stu-id="a2df3-184">BookingTypeOnlineCount, BookingTypePhoneCallCount</span></span>                                                                                         |
| <span data-ttu-id="a2df3-185">3</span><span class="sxs-lookup"><span data-stu-id="a2df3-185">3</span></span>           | <span data-ttu-id="a2df3-186">Categoria de Viagem</span><span class="sxs-lookup"><span data-stu-id="a2df3-186">Travel Category</span></span>              | <span data-ttu-id="a2df3-187">TravelCategoryBusinessCount, TravelCategoryLeisureCount</span><span class="sxs-lookup"><span data-stu-id="a2df3-187">TravelCategoryBusinessCount, TravelCategoryLeisureCount</span></span>                                                                                   |
| <span data-ttu-id="a2df3-188">4</span><span class="sxs-lookup"><span data-stu-id="a2df3-188">4</span></span>           | <span data-ttu-id="a2df3-189">Dólares Gastos</span><span class="sxs-lookup"><span data-stu-id="a2df3-189">Dollars Spent</span></span>                | <span data-ttu-id="a2df3-190">TotalDollarSpent</span><span class="sxs-lookup"><span data-stu-id="a2df3-190">TotalDollarSpent</span></span>                                                                                                                          |
| <span data-ttu-id="a2df3-191">5</span><span class="sxs-lookup"><span data-stu-id="a2df3-191">5</span></span>           | <span data-ttu-id="a2df3-192">Datas de entrada e de saída</span><span class="sxs-lookup"><span data-stu-id="a2df3-192">Check-in and Checkout dates</span></span>  | <span data-ttu-id="a2df3-193">StayDayCount, StayDayCount2016, StayDayCount2015, StayDayCount2014, StayCount, StayCount2016.</span><span class="sxs-lookup"><span data-stu-id="a2df3-193">StayDayCount, StayDayCount2016, StayDayCount2015, StayDayCount2014, StayCount, StayCount2016.</span></span> <span data-ttu-id="a2df3-194">StayCount2015, StayCount2014</span><span class="sxs-lookup"><span data-stu-id="a2df3-194">StayCount2015, StayCount2014</span></span>                |
| <span data-ttu-id="a2df3-195">6</span><span class="sxs-lookup"><span data-stu-id="a2df3-195">6</span></span>           | <span data-ttu-id="a2df3-196">Utilização de Serviço</span><span class="sxs-lookup"><span data-stu-id="a2df3-196">Service Usage</span></span>                | <span data-ttu-id="a2df3-197">UsageTenure, ConciergeUsage, CourierUsage, DryCleaningUsage, GymUsage, PhoneUsage, RestaurantUsage, SpaUsage, TelevisionUsage, WifiUsage</span><span class="sxs-lookup"><span data-stu-id="a2df3-197">UsageTenure, ConciergeUsage, CourierUsage, DryCleaningUsage, GymUsage, PhoneUsage, RestaurantUsage, SpaUsage, TelevisionUsage, WifiUsage</span></span>  |

### <a name="model-selection"></a><span data-ttu-id="a2df3-198">Seleção de Modelo</span><span class="sxs-lookup"><span data-stu-id="a2df3-198">Model selection</span></span>

<span data-ttu-id="a2df3-199">Agora, temos de escolher o algoritmo ideal a usar.</span><span class="sxs-lookup"><span data-stu-id="a2df3-199">Now we need to choose the optimal algorithm to use.</span></span> <span data-ttu-id="a2df3-200">Neste caso, a maioria das funcionalidades baseia-se em funcionalidades categóricas.</span><span class="sxs-lookup"><span data-stu-id="a2df3-200">In this case, most features are based on categorical features.</span></span> <span data-ttu-id="a2df3-201">Tipicamente, os modelos baseados em árvores de decisão funcionam bem.</span><span class="sxs-lookup"><span data-stu-id="a2df3-201">Typically, decision tree–based models work well.</span></span> <span data-ttu-id="a2df3-202">Se houver apenas funcionalidades numéricas, as redes neurais podem ser uma escolha melhor.</span><span class="sxs-lookup"><span data-stu-id="a2df3-202">If there are only numerical features, neural networks could be a better choice.</span></span> <span data-ttu-id="a2df3-203">A máquina vetorial de suporte (SVM) também é um bom candidato nestas situações; no entanto, precisa de um pouco de sintonização para extrair o melhor desempenho.</span><span class="sxs-lookup"><span data-stu-id="a2df3-203">Support vector machine (SVM) also is a good candidate in such situations; however, it needs quite a bit of tuning to extract the best performance.</span></span> <span data-ttu-id="a2df3-204">Escolhemos **Árvore de Decisão Reforçada de Duas Classes** como o primeiro modelo de eleição seguido por **SVM de Duas Classes** como o segundo modelo.</span><span class="sxs-lookup"><span data-stu-id="a2df3-204">We choose **Two-Class Boosted Decision Tree** as the first model of choice followed by **Two-Class SVM** as the second model.</span></span> <span data-ttu-id="a2df3-205">O Azure Machine Learning Studio permite-lhe fazer testes A/B, por isso é benéfico começar com dois modelos em vez de um.</span><span class="sxs-lookup"><span data-stu-id="a2df3-205">Azure Machine Learning Studio lets you do A/B testing, so it’s beneficial to start with two models rather than one.</span></span>

<span data-ttu-id="a2df3-206">A imagem a seguir mostra o pipeline de formação e avaliação do modelo do Azure Machine Learning Studio:</span><span class="sxs-lookup"><span data-stu-id="a2df3-206">The following image shows the model training and evaluation pipeline from Azure Machine Learning Studio:</span></span>

![Modelo de abandono do Azure Machine Learning Studio](media/azure-machine-learning-model.png)

<span data-ttu-id="a2df3-208">Também aplicamos uma técnica chamada **Importância de Permutação De Funcionalidades**, um aspeto importante da otimização do modelo.</span><span class="sxs-lookup"><span data-stu-id="a2df3-208">We also apply a technique called **Permutation Feature Importance**, an important aspect of model optimization.</span></span> <span data-ttu-id="a2df3-209">Os modelos incorporados têm pouca ou nenhuma informação sobre o impacto de qualquer funcionalidade específica na predição final.</span><span class="sxs-lookup"><span data-stu-id="a2df3-209">Built-in models have little to no insight into the impact of any specific feature on the final prediction.</span></span> <span data-ttu-id="a2df3-210">A calculadora de importância de funcionalidades usa um algoritmo personalizado, para calcular a influência das funcionalidades individuais no resultado de um modelo específico.</span><span class="sxs-lookup"><span data-stu-id="a2df3-210">The feature importance calculator uses a custom algorithm to compute the influence of individual features on the outcome for a specific model.</span></span> <span data-ttu-id="a2df3-211">A importância de funcionalidades é normalizada entre +1 e -1.</span><span class="sxs-lookup"><span data-stu-id="a2df3-211">The feature importance is normalized between +1 to -1.</span></span> <span data-ttu-id="a2df3-212">Uma influência negativa significa que a funcionalidade correspondente tem influência contraintuitiva no resultado e deve ser removida do modelo.</span><span class="sxs-lookup"><span data-stu-id="a2df3-212">A negative influence means the corresponding feature has counter-intuitive influence on the outcome and should be removed from the model.</span></span> <span data-ttu-id="a2df3-213">Uma influência positiva indica que a funcionalidade está a contribuir fortemente para a predição.</span><span class="sxs-lookup"><span data-stu-id="a2df3-213">A positive influence indicates the feature is contributing heavily towards the prediction.</span></span> <span data-ttu-id="a2df3-214">Estes valores não são coeficientes de correlação, pois são métricas diferentes.</span><span class="sxs-lookup"><span data-stu-id="a2df3-214">These values aren't correlation coefficients as they are different metrics.</span></span> <span data-ttu-id="a2df3-215">Para mais informações, consulte [Importância da Permutação de Funcionalidades](https://docs.microsoft.com/azure/machine-learning/studio-module-reference/permutation-feature-importance).</span><span class="sxs-lookup"><span data-stu-id="a2df3-215">For more information, see [Permutation Feature Importance](https://docs.microsoft.com/azure/machine-learning/studio-module-reference/permutation-feature-importance).</span></span>

<span data-ttu-id="a2df3-216">Toda a [experiência de abandono está disponível na Azure AI Gallery](https://gallery.azure.ai/Experiment/Hotel-Churn-Predictive-Exp).</span><span class="sxs-lookup"><span data-stu-id="a2df3-216">The entire [churn experiment is available in the Azure AI Gallery](https://gallery.azure.ai/Experiment/Hotel-Churn-Predictive-Exp).</span></span>

## <a name="customer-lifetime-value-prediction"></a><span data-ttu-id="a2df3-217">Predição de valor vitalício do cliente</span><span class="sxs-lookup"><span data-stu-id="a2df3-217">Customer lifetime value prediction</span></span>

<span data-ttu-id="a2df3-218">O cálculo do valor vitalício do cliente (CLTV) é uma das métricas-chave que uma empresa pode usar para avaliar e segmentar os seus clientes.</span><span class="sxs-lookup"><span data-stu-id="a2df3-218">The customer lifetime value (CLTV) calculation is one of the key metrics that a business can use to assess and segment its customers.</span></span> <span data-ttu-id="a2df3-219">Para o negócio hoteleiro, é fundamental conhecer os seus clientes.</span><span class="sxs-lookup"><span data-stu-id="a2df3-219">For the hotel business, it’s critical to know their customers.</span></span> <span data-ttu-id="a2df3-220">Por exemplo, compreender fatores que compõem bons clientes é informação crucial.</span><span class="sxs-lookup"><span data-stu-id="a2df3-220">For example, understanding factors that make up good customers is crucial information.</span></span> <span data-ttu-id="a2df3-221">Ajuda a administração do hotel a avaliar quais as funcionalidades em que precisam de se concentrar e melhorar para satisfazer os seus clientes que mais pagam.</span><span class="sxs-lookup"><span data-stu-id="a2df3-221">It helps the hotel management assess which features they need to focus on and improve to satisfy their high paying customers.</span></span> <span data-ttu-id="a2df3-222">Estas decisões podem ter um impacto direto nas vendas e nos ganhos.</span><span class="sxs-lookup"><span data-stu-id="a2df3-222">These decisions can have a direct impact on sales and earnings.</span></span>  

### <a name="definition-of-cltv"></a><span data-ttu-id="a2df3-223">Definição de CLTV</span><span class="sxs-lookup"><span data-stu-id="a2df3-223">Definition of CLTV</span></span>

<span data-ttu-id="a2df3-224">Para este exemplo, definimos o CLTV de um cliente como o valor total em dólares que o cliente deverá gastar nos próximos 365 dias.</span><span class="sxs-lookup"><span data-stu-id="a2df3-224">For this example, we define the CLTV of a customer as the total dollar amount the customer is expected to spend in the next 365 days.</span></span> <span data-ttu-id="a2df3-225">Vamos usar os últimos três anos de dados para todos os clientes para prever este valor.</span><span class="sxs-lookup"><span data-stu-id="a2df3-225">We are going to use the past three years’ worth of data for all customers to predict this value.</span></span>

### <a name="featurization"></a><span data-ttu-id="a2df3-226">Caracterização</span><span class="sxs-lookup"><span data-stu-id="a2df3-226">Featurization</span></span>

<span data-ttu-id="a2df3-227">Neste caso, a caracterização vai ser como o cenário de abandono.</span><span class="sxs-lookup"><span data-stu-id="a2df3-227">In this case, featurization is going to be quite like the churn scenario.</span></span> <span data-ttu-id="a2df3-228">No entanto, as etiquetas e os valores previstos são diferentes do acima definido.</span><span class="sxs-lookup"><span data-stu-id="a2df3-228">However, the labels and predicted values are different than defined above.</span></span>

### <a name="model-selection"></a><span data-ttu-id="a2df3-229">Seleção de Modelo</span><span class="sxs-lookup"><span data-stu-id="a2df3-229">Model selection</span></span>

<span data-ttu-id="a2df3-230">Prever o CLTV é um problema de regressão, uma vez que o valor previsto é uma variável contínua valorizada positivamente.</span><span class="sxs-lookup"><span data-stu-id="a2df3-230">Predicting the CLTV is a regression problem as the predicted value is a positive valued continuous variable.</span></span> <span data-ttu-id="a2df3-231">Com base nas propriedades da funcionalidade, selecionamos a **Regressão da Árvore de Decisão Reforçada** como um algoritmo e a **Regressão da Rede Neural** como outro algoritmo para preparar o modelo.</span><span class="sxs-lookup"><span data-stu-id="a2df3-231">Based on the feature properties, we select **Boosted Decision Tree Regression** as one algorithm and **Neural Network Regression** as another algorithm to train the model.</span></span>

## <a name="product-recommendation-or-next-best-action"></a><span data-ttu-id="a2df3-232">Recomendação do produto ou Próxima Melhor Ação</span><span class="sxs-lookup"><span data-stu-id="a2df3-232">Product recommendation or Next Best Action</span></span>

<span data-ttu-id="a2df3-233">A recomendação do produto num cenário hoteleiro é interpretada como recomendando serviços oferecidos pelo hotel aos clientes.</span><span class="sxs-lookup"><span data-stu-id="a2df3-233">Product recommendation in a hotel scenario is interpreted as recommending services offered by the hotel to the customers.</span></span> <span data-ttu-id="a2df3-234">O objetivo é escolher os serviços adequados para os clientes para que a sua utilização seja maximizada.</span><span class="sxs-lookup"><span data-stu-id="a2df3-234">The objective is to choose the appropriate services for customers so that their usage is maximized.</span></span> <span data-ttu-id="a2df3-235">É semelhante às recomendações de filmes para utilizadores de serviços de streaming de vídeo.</span><span class="sxs-lookup"><span data-stu-id="a2df3-235">It’s similar to movie recommendations for video streaming service users.</span></span>

### <a name="definition-of-product-recommendation-or-next-best-action"></a><span data-ttu-id="a2df3-236">Definição de Recomendação do Produto ou Próxima Melhor Ação</span><span class="sxs-lookup"><span data-stu-id="a2df3-236">Definition of Product Recommendation or Next Best Action</span></span>

<span data-ttu-id="a2df3-237">Definimos o objetivo como maximizando a quantidade de dólares de uso do serviço, oferecendo os melhores serviços de correspondência aos clientes do hotel de acordo com o seu interesse.</span><span class="sxs-lookup"><span data-stu-id="a2df3-237">We define the goal as maximizing the dollar amount of service usage by offering the best matching services to hotel customers according to their interest.</span></span>

### <a name="featurization"></a><span data-ttu-id="a2df3-238">Caracterização</span><span class="sxs-lookup"><span data-stu-id="a2df3-238">Featurization</span></span>

<span data-ttu-id="a2df3-239">Tal como o modelo de abandono, estamos a juntar ServiceCustomerID aoCustomerID de forma a criar recomendações de forma consistente por CustomerID.</span><span class="sxs-lookup"><span data-stu-id="a2df3-239">Like the churn model, we are joining the hotel ServiceCustomerID with CustomerID in order to build recommendations consistently per CustomerID.</span></span>

![Caracterização do modelo de recomendação](media/azure-machine-learning-model-featurization.png)

<span data-ttu-id="a2df3-241">Os dados são provenientes de três entidades diferentes e as funcionalidades são derivadas deles.</span><span class="sxs-lookup"><span data-stu-id="a2df3-241">The data is sourced from three different entities and features are derived from them.</span></span> <span data-ttu-id="a2df3-242">A caracterização para o problema da recomendação é diferente em comparação com os cenários de abandono ou CLTV.</span><span class="sxs-lookup"><span data-stu-id="a2df3-242">The featurization for the problem of recommendation is different compared to churn or CLTV scenarios.</span></span> <span data-ttu-id="a2df3-243">O modelo de recomendação necessita de dados de entrada sob a forma de três conjuntos de funcionalidades.</span><span class="sxs-lookup"><span data-stu-id="a2df3-243">The recommendation model needs input data in the form of three sets of features.</span></span>

### <a name="model-selection"></a><span data-ttu-id="a2df3-244">Seleção de Modelo</span><span class="sxs-lookup"><span data-stu-id="a2df3-244">Model selection</span></span>

<span data-ttu-id="a2df3-245">Prevemos produtos ou serviços usando o algoritmo chamado **Train Matchbox Recommender** para treinar o modelo de recomendação.</span><span class="sxs-lookup"><span data-stu-id="a2df3-245">We predict products or services by using the algorithm called **Train Matchbox Recommender** to train the recommendation model.</span></span>

![Algoritmo de recomendação de produtos](media/azure-machine-learning-model-recommendation-algorithm.png)

<span data-ttu-id="a2df3-247">As três portas de entrada para o modelo **Train Matchbox Recommender** requerem os dados de utilização do serviço de formação, a descrição do cliente (opcional) e a descrição do serviço.</span><span class="sxs-lookup"><span data-stu-id="a2df3-247">The three input ports for the **Train Matchbox Recommender** model takes in the training service usage data, customer description (optional), and service description.</span></span> <span data-ttu-id="a2df3-248">Há três maneiras diferentes de classificar o modelo.</span><span class="sxs-lookup"><span data-stu-id="a2df3-248">There are three different ways of scoring the model.</span></span> <span data-ttu-id="a2df3-249">Uma delas é para avaliação de modelos onde uma pontuação de Ganho Cumulativo Com Desconto Normalizado (NDCG) é calculada para classificar os itens classificados.</span><span class="sxs-lookup"><span data-stu-id="a2df3-249">One is for model evaluation where a Normalized Discounted Cumulative Gain (NDCG) score is calculated to rank the rated items.</span></span> <span data-ttu-id="a2df3-250">Nesta experiência, temos a pontuação NDCG como 0,97.</span><span class="sxs-lookup"><span data-stu-id="a2df3-250">In this experiment, we have the NDCG score as 0.97.</span></span> <span data-ttu-id="a2df3-251">As outras duas opções são classificar o modelo em todo o catálogo de serviços recomendável, ou classificar apenas em itens que os utilizadores não utilizaram antes.</span><span class="sxs-lookup"><span data-stu-id="a2df3-251">The other two options are scoring the model on the entire recommendable service catalog, or scoring only on items that users have not used before.</span></span>

<span data-ttu-id="a2df3-252">Olhando mais adiante sobre as distribuições das recomendações em todo o catálogo de serviços, notamos que telefone, Wi-Fi e correio são os principais serviços a recomendar.</span><span class="sxs-lookup"><span data-stu-id="a2df3-252">Looking further on the distributions of the recommendations on the entire service catalog, we notice that phone, WiFi, and courier are the top services to be recommended.</span></span> <span data-ttu-id="a2df3-253">Isto é consistente com o que encontramos a partir das distribuições dos dados de consumo de serviço:</span><span class="sxs-lookup"><span data-stu-id="a2df3-253">This is consistent with what we found from the distributions of the service consumption data:</span></span>

![Saída do modelo de recomendação](media/azure-machine-learning-model-output.png)

<span data-ttu-id="a2df3-255">Toda a [experiência de recomendação do produto pode ser acedida no Azure AI Gallery.](https://gallery.azure.ai/Experiment/Recommendation-4)</span><span class="sxs-lookup"><span data-stu-id="a2df3-255">The entire [product recommendation experiment can be accessed in Azure AI Gallery.](https://gallery.azure.ai/Experiment/Recommendation-4)</span></span>

## <a name="integrate-custom-models"></a><span data-ttu-id="a2df3-256">Integrar modelos personalizados</span><span class="sxs-lookup"><span data-stu-id="a2df3-256">Integrate custom models</span></span>

<span data-ttu-id="a2df3-257">Para utilizar estas previsões no Customer Insights, é necessário **exportar** as previsões juntamente com os IDs de cliente.</span><span class="sxs-lookup"><span data-stu-id="a2df3-257">To use these predictions in Customer Insights, you need to **export** the predictions along with the customer IDs.</span></span> <span data-ttu-id="a2df3-258">[Exporte-os para o mesmo local de armazenamento de Blobs do Azure](https://docs.microsoft.com/azure/storage/common/storage-import-export-data-from-blobs) para o qual exporta os dados de origem.</span><span class="sxs-lookup"><span data-stu-id="a2df3-258">[Export them to the same Azure Blob storage location](https://docs.microsoft.com/azure/storage/common/storage-import-export-data-from-blobs) that you export the source data to.</span></span> <span data-ttu-id="a2df3-259">O serviço Web preditivo pode ser programado para ser executado regularmente e atualizar as classificações.</span><span class="sxs-lookup"><span data-stu-id="a2df3-259">The predictive web service can be scheduled to run regularly and update the scores.</span></span>

<span data-ttu-id="a2df3-260">Os dados gerados pelo modelo personalizado podem ser utilizados para melhorar ainda mais os dados dos seus clientes.</span><span class="sxs-lookup"><span data-stu-id="a2df3-260">Data generated by the custom model can be used to further enrich your customer data.</span></span> <span data-ttu-id="a2df3-261">Para mais informações, consulte [Modelos personalizados de aprendizagem automática](custom-models.md).</span><span class="sxs-lookup"><span data-stu-id="a2df3-261">For more information, see [Custom machine learning models](custom-models.md).</span></span>
